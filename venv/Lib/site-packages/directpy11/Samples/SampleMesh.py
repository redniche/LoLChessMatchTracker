
"""Very simple mesh sample with basic lightning."""

import math
import sys

import d3d11
import d3d11x
from d3d11c import *
    
class SampleMesh(d3d11x.Frame):
    def onCreate(self):
        #Load the mesh and it's texture.
        self.mesh = d3d11x.Mesh(self.device, "Mesh/barrel.obj")
        self.mesh.textureView = self.loadTextureView("static-barrel.dds") 
        
    def onRender(self):
        #World matrix, rotate the model.
        world = d3d11.Matrix()
        world.rotate((self.time, 0, self.time))
        
        view = self.createLookAt((0, 5, -5), (0, 0, 0)) 
        projection = self.createProjection(60, 0.1, 100.0)
    
        #Set one yellow light.
        self.mesh.setLights([((10, 0, 0), (0.5, 0.5, 0, 0))])
	
        #Update the effect and render the mesh.
        self.mesh.effect.set("lightAmbient", (0.5, 0.5, 0.5, 0))
        self.mesh.render(world, view, projection)
        
if __name__ == "__main__":
    sample = SampleMesh("Mesh Sample", __doc__)
    sample.mainloop()